import{d as s,o as e,c as a,a as o}from"./@vue.09242693.js";const c={class:"markdown-body"},t=o(`<h1>MutationObserver</h1><p><strong>\u7528\u4E8E\u76D1\u89C6\u5BF9Dom\u6811\u6240\u4F5C\u51FA\u66F4\u6539\u7684\u80FD\u529B</strong>\uFF0C\u5F53\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u6267\u884C\u76F8\u5BF9\u5E94\u7684\u5904\u7406\u51FD\u6570</p><h2>MutationRecord \u5BF9\u8C61</h2><div class="code-wrapper"><div class="heading-row no-heading show-lang"><span class="lang-display">tsx</span></div><div class="code-block language-tsx no-line-numbers" data-lang="tsx" data-modifiers=""><pre class="language-tsx" data-lang="tsx"><code class="code-line odd first-row line-1"><span class="token keyword">interface</span> <span class="token class-name">MutationRecord</span> <span class="token punctuation">{</span> </code>
<code class="code-line even line-2">  <span class="token keyword">readonly</span> attribute DOMString <span class="token keyword">type</span> <span class="token comment">//\u53D8\u5316\u7684\u7C7B\u578B attributes | childList | characterData</span></code>
<code class="code-line odd line-3">  <span class="token punctuation">[</span>SameObject<span class="token punctuation">]</span> <span class="token keyword">readonly</span> attribute Node target <span class="token comment">//\u53D8\u5316\u7684dom</span></code>
<code class="code-line even line-4">  <span class="token punctuation">[</span>SameObject<span class="token punctuation">]</span> <span class="token keyword">readonly</span> attribute NodeList addedNodes <span class="token comment">//\u5982\u679C\u662F\u65B0\u589E\u8282\u70B9\uFF0C\u65B0\u589E\u7684\u8282\u70B9</span></code>
<code class="code-line odd line-5">  <span class="token punctuation">[</span>SameObject<span class="token punctuation">]</span> <span class="token keyword">readonly</span> attribute NodeList removedNodes <span class="token comment">//\u5982\u679C\u662F\u5220\u9664\u8282\u70B9\uFF0C\u5220\u9664\u7684\u8282\u70B9</span></code>
<code class="code-line even line-6">  <span class="token keyword">readonly</span> attribute Node<span class="token operator">?</span> previousSibling <span class="token comment">//\u4E0A\u4E00\u4E2A\u5144\u5F1F\u5143\u7D20</span></code>
<code class="code-line odd line-7">  <span class="token keyword">readonly</span> attribute Node<span class="token operator">?</span> nextSibling <span class="token comment">//\u4E0B\u4E00\u4E2A\u5144\u5F1F\u5143\u7D20</span></code>
<code class="code-line even line-8">  <span class="token keyword">readonly</span> attribute DOMString<span class="token operator">?</span> attributeName <span class="token comment">//\u5C5E\u6027\u540D</span></code>
<code class="code-line odd line-9">  <span class="token keyword">readonly</span> attribute DOMString<span class="token operator">?</span> attributeNamespace <span class="token comment">//\u5C5E\u6027\u96C6\u5408</span></code>
<code class="code-line even line-10">  <span class="token keyword">readonly</span> attribute DOMString<span class="token operator">?</span> oldValue <span class="token comment">//\u8BE5\u5C5E\u6027\u7684\u65E7\u503C</span></code>
<code class="code-line odd last-row line-11"><span class="token punctuation">}</span></code></pre></div></div><h2>observerOptions \u914D\u7F6E</h2><div class="code-wrapper"><div class="heading-row no-heading show-lang"><span class="lang-display">tsx</span></div><div class="code-block language-tsx no-line-numbers" data-lang="tsx" data-modifiers=""><pre class="language-tsx" data-lang="tsx"><code class="code-line odd first-row line-1">dictionary MutationObserverInit <span class="token punctuation">{</span></code>
<code class="code-line even line-2">  <span class="token comment">// childList | attributes | characterData | subtree \u76D1\u542C\u7684\u5BF9\u8C61</span></code>
<code class="code-line odd line-3">  <span class="token comment">// childList : \u5B50\u8282\u70B9\u7684\u5220\u9664\u6216\u8005\u6DFB\u52A0</span></code>
<code class="code-line even line-4">  <span class="token comment">// attributes : \u5C5E\u6027\u7684\u4FEE\u6539</span></code>
<code class="code-line odd line-5">  <span class="token comment">// characterData : \u6587\u672C\u8282\u70B9\u4FEE\u6539\u5B57\u7B26\u5185\u5BB9</span></code>
<code class="code-line even line-6">  <span class="token comment">// subtree : \u662F\u5426\u89C2\u5BDF\u6240\u6709\u540E\u4EE3\u8282\u70B9</span></code>
<code class="code-line odd line-7">  <span class="token builtin">boolean</span> childList <span class="token operator">=</span> <span class="token boolean">false</span></code>
<code class="code-line even line-8">  <span class="token builtin">boolean</span> attributes</code>
<code class="code-line odd line-9">  <span class="token builtin">boolean</span> characterData</code>
<code class="code-line even line-10">  <span class="token builtin">boolean</span> subtree <span class="token operator">=</span> <span class="token boolean">false</span></code>
<code class="code-line odd line-11">  <span class="token comment">// attributeOldValue | characterDataOldValue \u5BF9\u8F93\u51FA\u7ED3\u679C\u7684\u5B9A\u4E49</span></code>
<code class="code-line even line-12">  <span class="token comment">// attributeOldValue : \u662F\u5426\u8BB0\u5F55\u5C5E\u6027\u53D8\u5316\u4E4B\u524D\u7684\u503C</span></code>
<code class="code-line odd line-13">  <span class="token comment">// characterDataOldValue : \u662F\u5426\u8BB0\u5F55\u6587\u672C\u8282\u70B9\u4E4B\u524D\u7684\u503C</span></code>
<code class="code-line even line-14">  <span class="token builtin">boolean</span> attributeOldValue</code>
<code class="code-line odd line-15">  <span class="token builtin">boolean</span> characterDataOldValue</code>
<code class="code-line even line-16">  <span class="token comment">// \u5B9A\u4E49\u5C5E\u6027\u76D1\u542C\u65F6\u4EC5\u9700\u8981\u76D1\u542C\u7684\u5C5E\u6027\u6570\u7EC4</span></code>
<code class="code-line odd line-17">  sequence<span class="token operator">&lt;</span>DOMString<span class="token operator">&gt;</span> attributeFilter</code>
<code class="code-line even last-row line-18"><span class="token punctuation">}</span></code></pre></div></div><h2>\u7528\u6CD5</h2><div class="code-wrapper"><div class="heading-row no-heading show-lang"><span class="lang-display">js</span></div><div class="code-block language-javascript no-line-numbers" data-lang="js" data-modifiers=""><pre class="language-javascript" data-lang="js"><code class="code-line odd first-row line-1"><span class="token comment">// \u9009\u62E9\u9700\u8981\u89C2\u5BDF\u53D8\u52A8\u7684\u8282\u70B9</span></code>
<code class="code-line even line-2"><span class="token keyword">const</span> targetNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;some-id&#39;</span><span class="token punctuation">)</span></code>
<code class="code-line odd line-3"></code>
<code class="code-line even line-4"><span class="token comment">// \u89C2\u5BDF\u5668\u7684\u914D\u7F6E\uFF08\u9700\u8981\u89C2\u5BDF\u4EC0\u4E48\u53D8\u52A8\uFF09</span></code>
<code class="code-line odd line-5"><span class="token keyword">const</span> observerOptions <span class="token operator">=</span> <span class="token punctuation">{</span> </code>
<code class="code-line even line-6">    <span class="token literal-property property">attributes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-7">    <span class="token literal-property property">childList</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></code>
<code class="code-line even line-8">    <span class="token literal-property property">characterData</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-9">    <span class="token literal-property property">subtree</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></code>
<code class="code-line even line-10">    <span class="token literal-property property">attributeOldValue</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></code>
<code class="code-line odd line-11">    <span class="token literal-property property">characterDataOldValue</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></code>
<code class="code-line even line-12">    <span class="token literal-property property">attributeFilter</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;class&#39;</span><span class="token punctuation">]</span></code>
<code class="code-line odd line-13"><span class="token punctuation">}</span></code>
<code class="code-line even line-14"></code>
<code class="code-line odd line-15"><span class="token comment">// \u5F53\u89C2\u5BDF\u5230\u53D8\u52A8\u65F6\u6267\u884C\u7684\u56DE\u8C03\u51FD\u6570</span></code>
<code class="code-line even line-16"><span class="token keyword">const</span> <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">mutationsList<span class="token punctuation">,</span> observer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code>
<code class="code-line odd line-17">    <span class="token comment">// mutationsList \u4EA7\u751F\u53D8\u5316\u7684 MutationRecord \u6570\u7EC4</span></code>
<code class="code-line even line-18">    <span class="token comment">// observer \u89C2\u5BDF\u8005\u5B9E\u4F8B\u5BF9\u8C61</span></code>
<code class="code-line odd line-19">    mutationsList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mutation</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></code>
<code class="code-line even line-20">    	<span class="token keyword">switch</span><span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span></code>
<code class="code-line odd line-21">      		<span class="token keyword">case</span> <span class="token string">&#39;childList&#39;</span><span class="token operator">:</span></code>
<code class="code-line even line-22">                	<span class="token comment">// \u6DFB\u52A0\u7684\u5143\u7D20\u5728\uFF1Amutation.addedNodes</span></code>
<code class="code-line odd line-23">                	<span class="token comment">// \u5220\u9664\u7684\u5143\u7D20\u5728\uFF1Amutation.removedNodes</span></code>
<code class="code-line even line-24">                	<span class="token keyword">break</span></code>
<code class="code-line odd line-25">      		<span class="token keyword">case</span> <span class="token string">&#39;attributes&#39;</span><span class="token operator">:</span></code>
<code class="code-line even line-26">                	<span class="token comment">// \u6539\u53D8\u7684\u5143\u7D20\u662F\uFF1Amutation.target</span></code>
<code class="code-line odd line-27">                	<span class="token comment">// \u6539\u53D8\u7684\u5C5E\u6027\u662F\uFF1Amutation.attributeName</span></code>
<code class="code-line even line-28">                	<span class="token comment">// \u65E7\u7684\u5C5E\u6027\u503C\u662F\uFF1Amutation.oldValue</span></code>
<code class="code-line odd line-29">                	<span class="token keyword">break</span></code>
<code class="code-line even line-30">            <span class="token keyword">case</span> <span class="token string">&#39;characterData&#39;</span><span class="token operator">:</span></code>
<code class="code-line odd line-31">                	<span class="token comment">// \u6587\u672C\u8282\u70B9\u5185\u5BB9\u53D1\u751F\u4E86\u53D8\u5316</span></code>
<code class="code-line even line-32">                	<span class="token comment">// \u65E7\u7684\u5185\u5BB9\u662F\uFF1Amutation.oldValue</span></code>
<code class="code-line odd line-33">                	<span class="token keyword">break</span></code>
<code class="code-line even line-34">    	<span class="token punctuation">}</span></code>
<code class="code-line odd line-35">  	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>
<code class="code-line even line-36"><span class="token punctuation">}</span><span class="token punctuation">;</span></code>
<code class="code-line odd line-37"></code>
<code class="code-line even line-38"><span class="token comment">// \u521B\u5EFA\u4E00\u4E2A\u89C2\u5BDF\u5668\u5B9E\u4F8B\u5E76\u4F20\u5165\u56DE\u8C03\u51FD\u6570</span></code>
<code class="code-line odd line-39"><span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span></code>
<code class="code-line even line-40"></code>
<code class="code-line odd line-41"><span class="token comment">// \u4EE5\u4E0A\u8FF0\u914D\u7F6E\u5F00\u59CB\u89C2\u5BDF\u76EE\u6807\u8282\u70B9</span></code>
<code class="code-line even line-42">observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>targetNode<span class="token punctuation">,</span> observerOptions<span class="token punctuation">)</span></code>
<code class="code-line odd line-43"></code>
<code class="code-line even line-44"><span class="token comment">// \u505C\u6B62\u89C2\u5BDF</span></code>
<code class="code-line odd last-row line-45">observer<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div></div><h2>\u6CE8\u610F</h2><ol><li>\u89C2\u5BDF\u8005\u7684\u56DE\u8C03\u662F<strong>\u5F02\u6B65\u89E6\u53D1</strong>\u7684\uFF0C\u5E76\u4E14\u662F<strong>\u5FAE\u4EFB\u52A1</strong>(microtask)</li><li>\u89C2\u5BDF\u8005\u662F\u5F31\u5F15\u7528\uFF0C\u8282\u70B9\u5220\u9664\u540E\u89C2\u5BDF\u8005\u4F1A\u81EA\u52A8\u6E05\u9664\uFF0C\u5E76\u4E0D\u9700\u8981\u4E3B\u52A8 <code>disconnect</code></li></ol>`,10),u=[t],r={title:null,tags:["MutationObserver"],categories:null,description:"\u7528js\u76D1\u542Cdom\u5143\u7D20\u7684\u53D8\u5316\uFF0C\u5F53\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u6267\u884C\u76F8\u5BF9\u5E94\u7684\u5904\u7406\u51FD\u6570",publishTime:"2022-08-13T00:21:10.000Z",updateTime:null,img:null,toc:!0},k="",F=s({__name:"index",setup(l,{expose:n}){return n({frontmatter:{title:null,tags:["MutationObserver"],categories:null,description:"\u7528js\u76D1\u542Cdom\u5143\u7D20\u7684\u53D8\u5316\uFF0C\u5F53\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u6267\u884C\u76F8\u5BF9\u5E94\u7684\u5904\u7406\u51FD\u6570",publishTime:"2022-08-13T00:21:10.000Z",updateTime:null,img:null,toc:!0},excerpt:void 0}),(p,d)=>(e(),a("div",c,u))}});export{F as default,k as excerpt,r as frontmatter};
