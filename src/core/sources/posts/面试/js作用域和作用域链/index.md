---

# 默认为文件名称
title: 

tags:
  - var、let、const
  - 作用域
  - 变量提升
  - 暂时性死区

# 类别中已包含文件夹名称
categories:

description: 有哪几种作用域呢，用 var、let、const 声明的变量分别属于什么作用域

# 该字段必须,格式 <YYYY-MM-DD hh:mm:ss>
publishTime: 2022-09-05 00:22:13
updateTime:
 
# 默认随机
img: 

# 目录
toc: false

# 评论
comment: true

# 发布
publish: true
---

## 作用域

**作用域决定了变量与函数的可访问范围，即作用域控制着变量与函数的可见性和生命周期**



### 全局作用域

- 最外层函数以及最外层变量
- 所有 window 对象的属性拥有全局作用域
- 未定义直接赋值的变量（由于变量提升使之成为全局变量）

弊端：如果写了很多 JS 代码，变量定义都没有用函数包括，那么它们就全部都在全局作用域中,会污染全局命名空间, 容易引起命名冲突



### 函数作用域

局部作用域一般只能在固定的代码片段中才能访问

定义在函数中的变量就在函数作用域中，函数内部访问，函数每次调用都有一个不同的作用域，意味着同名变量可以在不同的函数中。因为这些变量绑定在不同的函数中，拥有不同作用域，彼此之间不能访问



### 块作用域

ES6新增 let 和 const 命令，用来创建块级作用域变量，使用 let 命令声明的变量只能在 let 命令所在的代码块内有效

- 变量不会提升到代码块顶部且不允许从外部访问块级作用域内部变量
- 不允许反复声明



## 作用域链

- 多个上下级关系的作用域形成的链, 它的方向是从下向上的(从内到外)
- 查找变量时就是沿着作用域链来查找的

查找顺序规则：

- 在当前作用域下的执行上下文中查找对应的属性
- 在上一级作用域的执行上下文中查找对应的属性
- 直到全局作用域, 如果还找不到就抛出找不到的异常



**注意**：

- 作用域在函数定义时就已经确定了，而不是在函数调用时
- 对象变量不能产生局部作用域，只能通过 this 访问对象的上下文



## var、let、const 区别

- var 声明的范围是函数作用域，let 和 const 声明的范围是块作用域
- var 声明的变量会被提升到函数作用域的顶部，let 和 const 声明的变量不存在提升，且具有**暂时性死区**特征
- var 允许在同一个作用域中重复声明同一个变量，let 和 const 不允许
- 在全局作用域中使用 var 声明的变量会成为 window 对象的属性，let 和 const 声明的变量则不会
- const 的行为与 let 基本相同，唯一 一个重要的区别是，使用 const 声明的变量必须进行初始化，且不能被修改
  

| 关键字 | 变量提升 | 块级作用域 | 重复声明同名变量 | 重新赋值 |
| :----- | :------- | :--------- | :--------------- | :------- |
| var    | √        | ×          | √                | √        |
| let    | ×        | √          | ×                | √        |
| const  | ×        | √          | ×                | ×        |



### 变量提升

```js
//用var命名的变量有变量提升
console.log(num1)  // undefined
var num1 = 10
// 以上代码运行时,相当于下面的写法

var num1  // 声明提升到作用域最顶端
console.log(num1)  // undefined
num1 = 10
```

另外，**Function 同样会有变量提升，且优先级高于 var**

```js
var a = 10
function a(){}
console.log(a)
// 10
// 相当于：
function a(){}
var a
a = 10
console.log(a)

// 需要注意以下：
var a = 10
var a = function(){}
console.log(a)
// ƒ (){}
```

### 暂时性死区

只要一进入当前作用域，所要使用的变量就已经存在了，但是不可获取，**只有等到声明变量的那一行代码出现，才可以获取和使用该变量**

```js
var a = 1; // 声明
if (true) {
  // 这里形成了 a 不能被使用的死区
  a = '1'; // 报错 因为本区域有 a 声明变量
  let a; // 绑定if这个块级的作用域 不能出现 a 变量
}
```



















