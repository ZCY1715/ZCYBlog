---

# 默认为文件名称
title: 

tags:

# 类别中已包含文件夹名称
categories:

description: 闭包有什么作用呢，怎么实现局部数据缓存

# 该字段必须,格式 <YYYY-MM-DD hh:mm:ss>
publishTime: 2022-09-04 23:34:00
updateTime:
 
# 默认随机
img: 

# 目录
toc: false

# 评论
comment: true

# 发布
publish: true
---

## 闭包(closure)

> 内部函数总是可以访问其外部函数中声明的变量，当通过调用一个外部函数返回一个内部函数后，即使该外部函数已经执行结束了，但是内部函数引用外部函数的变量依然保存在内存中，我们就把这些变量的集合称为闭包

闭包中的数据会组成一个**对象**，然后保存在**堆空间**中

如果函数存在闭包，其所有内部函数都会拥有一个指向这个闭包的引用，即所有内部函数会共享同一个闭包，**只要任意内部函数有引用外部函数中声明的变量，这个变量都会被纳入闭包内**，而且**最内部的函数会持有所有外部的闭包**



闭包有3个**特性**：

- 函数嵌套函数
- 函数内部可以引用函数外部的参数和变量
- 参数和变量不会被垃圾回收机制回收



用处：

- 保护函数内的变量安全 ，实现封装，防止变量流入其他环境发生命名冲突
- 在内存中维持一个变量，可以做缓存（但使用多了同时也是一项缺点，消耗内存）
- 匿名自执行函数可以减少内存消耗



缺处：

- 被引用的私有变量不能被销毁，增大了内存消耗，造成内存泄漏，解决方法是可以在使用完变量后手动为它赋值为null
- 由于闭包涉及跨域访问，所以会导致性能损失，我们可以通过把跨作用域变量存储在局部变量中，然后直接访问局部变量，来减轻对执行速度的影响

















